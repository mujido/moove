ifndef MOOVE
$(error MOOVE must be set to the base directory of the MOOVE library)
endif

ifndef BOOST
$(error BOOST must be set to the base directory of the Boost library)
endif

INCLUDE_DIRS = -I ../include -I ${MOOVE}/include -I ${BOOST}

ifndef CXXFLAGS

ifndef STRICT
CXXFLAGS = -pipe -g -fno-inline
else
CXXFLAGS = -pipe -g -fno-inline -Wall -pedantic
endif

endif

all: moosh disasm

moosh: msg_handler.o moosh_builtins.o moosh.o ${MOOVE}/src/moove.a
	${CXX} ${CXXFLAGS} -o moosh $^

disasm: disasm.o msg_handler.o ${MOOVE}/src/moove.a
	${CXX} ${CXXFLAGS} -o disasm $^

%.o: %.cpp
	${CXX} ${CXXFLAGS} ${INCLUDE_DIRS} -c $<

clean:
	rm -f *.o moosh disasm
